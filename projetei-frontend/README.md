# ProjetaÃ­ - AplicaÃ§Ã£o Frontend (React)

![React](https://img.shields.io/badge/React-19.x-61DAFB?logo=react)
![Vite](https://img.shields.io/badge/Vite-7.x-646CFF?logo=vite)
![JavaScript](https://img.shields.io/badge/JavaScript-ES6+-F7DF1E?logo=javascript)
![dnd-kit](https://img.shields.io/badge/@dnd--kit-core-blue)

Esta Ã© a aplicaÃ§Ã£o frontend para o gerenciador de projetos "ProjetaÃ­". Ã‰ uma **Single Page Application (SPA)** construÃ­da com React que consome a API backend (Java/Spring Boot), oferecendo uma experiÃªncia de usuÃ¡rio rica e interativa para o gerenciamento de projetos e tarefas.

## Sobre o Projeto

Este projeto Ã© a interface visual do ProjetaÃ­. Ele foi construÃ­do para ser rÃ¡pido, reativo e fÃ¡cil de manter, utilizando ferramentas modernas do ecossistema JavaScript. O objetivo Ã© consumir a API REST para fornecer funcionalidades de CRUD (Criar, Ler, Atualizar, Deletar) de forma intuitiva para o usuÃ¡rio.

A arquitetura foca na separaÃ§Ã£o de responsabilidades:
* **Pages**: Controlam o carregamento de dados e a lÃ³gica de negÃ³cios daquela "tela" (`Dashboard.jsx`, `ProjectView.jsx`).
* **Components**: Componentes de UI reutilizÃ¡veis que recebem dados via props e gerenciam seu prÃ³prio estado interno quando necessÃ¡rio (ex: modais, cards).
* **Services**: Isola toda a comunicaÃ§Ã£o HTTP com o backend (`apiService.js`).
* **Utils**: Isola lÃ³gicas auxiliares, como a persistÃªncia em `localStorage` (`myProjects.js`) e a gestÃ£o do Modo Desenvolvedor (`devMode.js`).

## Funcionalidades Principais

* **Quadro Kanban Interativo**: VisualizaÃ§Ã£o de tarefas (A Fazer, Em Andamento, ConcluÃ­do) com funcionalidade **Drag-and-Drop (DnD)** para mudanÃ§a de status, utilizando `@dnd-kit`.
    * **Regras de Checklist**: O DnD para "ConcluÃ­do" sÃ³ Ã© permitido se a tarefa nÃ£o tiver checklist ou se todos os itens estiverem marcados. Para "A Fazer", sÃ³ Ã© permitido se nÃ£o tiver checklist ou se *nem todos* os itens estiverem marcados.
* **"Meus Projetos"**: PersistÃªncia local (`localStorage`) dos projetos favoritos do usuÃ¡rio, sendo a visualizaÃ§Ã£o padrÃ£o do Dashboard.
* **Busca Inteligente no Header**:
    * **Por CÃ³digo**: A busca por um cÃ³digo de projeto (ex: `PRJ-123`) abre o `ProjectDetailModal` em modo "lookup", permitindo visualizar detalhes e adicionar aos "Meus Projetos".
    * **Por Nome**: Filtra dinamicamente a lista de projetos visÃ­vel no `Dashboard`.
* **Modo Desenvolvedor**: Um modo oculto (ativado por uma senha no campo de busca) que permite visualizar "Todos os Projetos" no Dashboard, alÃ©m de "Meus Projetos". Controlado por `devMode.js`.
* **CRUD Completo**: AlÃ©m de projetos e tarefas, o usuÃ¡rio pode gerenciar **Checklists** e **ComentÃ¡rios** dentro de cada tarefa atravÃ©s do `TaskDetailModal`, com ediÃ§Ã£o "in-loco" (inline).
* **SincronizaÃ§Ã£o via Eventos**: O estado da aplicaÃ§Ã£o Ã© atualizado atravÃ©s de eventos customizados (`window.dispatchEvent`), garantindo que diferentes partes da UI reajam a mudanÃ§as (ex: `projects:changed`, `devmode:changed`, `ui:toast`).
* **Modais ReutilizÃ¡veis**: Componentes como `ConfirmModal.jsx` sÃ£o usados para aÃ§Ãµes destrutivas (excluir projeto/tarefa), garantindo consistÃªncia.

## Tecnologias e Bibliotecas Utilizadas

* **React (v19+)**: Biblioteca principal para a construÃ§Ã£o da UI.
* **Vite (v7+)**: Ferramenta de build e servidor de desenvolvimento.
* **JavaScript (ES6+) & JSX**: Linguagem base.
* **`react-router-dom` (v7+)**: Gerenciamento de rotas (`/` e `/projects/:code`).
* **`@dnd-kit/core` & `@dnd-kit/sortable`**: Bibliotecas para Drag-and-Drop.
* **`react-icons`**: Biblioteca para Ã­cones (ex: `FaPencilAlt`).
* **CSS Puro**: EstilizaÃ§Ã£o feita com CSS modularizado por componente.

## Como Executar o Projeto Localmente

**PrÃ©-requisitos:**
* [Node.js](https://nodejs.org/) (versÃ£o LTS recomendada)
* A **API Backend do ProjetaÃ­** deve estar em execuÃ§Ã£o (verifique a URL no `.env`).

**Passos:**
1.  Clone o repositÃ³rio (se ainda nÃ£o o fez).
2.  Navegue atÃ© a pasta do projeto no terminal:
    ```sh
    cd projetei-frontend
    ```
3.  Instale as dependÃªncias:
    ```sh
    npm install
    ```
4.  Crie ou configure o arquivo `.env` (veja a seÃ§Ã£o abaixo).
5.  Inicie o servidor de desenvolvimento:
    ```sh
    npm run dev
    ```
6.  Abra o navegador no endereÃ§o indicado (geralmente `http://localhost:5173`).

## ðŸ”§ ConfiguraÃ§Ã£o do Ambiente (`.env`)

Crie um arquivo `.env` na raiz do projeto com o seguinte conteÃºdo, ajustando os valores conforme necessÃ¡rio:

```dotenv
# EndereÃ§o base da API backend (sem /api no final)
VITE_API_URL=http://localhost:8081

# Senha para ativar o Modo Desenvolvedor na busca do Header
# Deixe em branco ("") para desativar em produÃ§Ã£o.
VITE_DEV_PASS=dev:on
```

* **`VITE_API_URL`**: URL base onde a API backend estÃ¡ rodando. O `apiService.js` adicionarÃ¡ `/api` automaticamente.
* **`VITE_DEV_PASS`**: Uma "senha" secreta. Ao digitar exatamente esta string no campo de busca do Header, o Modo Desenvolvedor Ã© ativado, permitindo ver "Todos os Projetos". Digitar `dev:off` desativa o modo.

## Estrutura de Pastas e Arquivos

```
projetei-frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/            # Componentes de UI reutilizÃ¡veis
â”‚   â”‚   â”œâ”€â”€ ConfirmModal.jsx     # Modal genÃ©rico para confirmaÃ§Ãµes
â”‚   â”‚   â”œâ”€â”€ Header.jsx           # Barra de navegaÃ§Ã£o superior e busca
â”‚   â”‚   â”œâ”€â”€ KanbanColumn.jsx     # Coluna do quadro Kanban (A Fazer, etc.)
â”‚   â”‚   â”œâ”€â”€ NewProjectModal.jsx  # Modal para criar novo projeto
â”‚   â”‚   â”œâ”€â”€ ProjectCard.jsx      # Card de projeto exibido no Dashboard
â”‚   â”‚   â”œâ”€â”€ ProjectDetailModal.jsx # Modal para ver/editar detalhes do PROJETO
â”‚   â”‚   â”œâ”€â”€ QuickAddTask.jsx     # Componente inline para adicionar tarefa na coluna "A Fazer"
â”‚   â”‚   â”œâ”€â”€ TaskCard.jsx         # Card de tarefa exibido no Kanban (arrastÃ¡vel)
â”‚   â”‚   â””â”€â”€ TaskDetailModal.jsx  # Modal complexo para ver/editar detalhes da TAREFA
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                 # Componentes que representam as "telas" principais
â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx        # Tela inicial com a grade de projetos
â”‚   â”‚   â””â”€â”€ ProjectView.jsx      # Tela de visualizaÃ§Ã£o de um projeto (Kanban)
â”‚   â”‚
â”‚   â”œâ”€â”€ services/              # LÃ³gica de comunicaÃ§Ã£o com a API
â”‚   â”‚   â””â”€â”€ apiService.js        # Centraliza todas as chamadas `fetch`
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                 # FunÃ§Ãµes utilitÃ¡rias auxiliares
â”‚   â”‚   â”œâ”€â”€ devMode.js           # LÃ³gica para ativar/desativar o Modo Desenvolvedor
â”‚   â”‚   â””â”€â”€ myProjects.js        # FunÃ§Ãµes para gerenciar "Meus Projetos" no localStorage
â”‚   â”‚
â”‚   â”œâ”€â”€ App.jsx                # Componente raiz (estrutura principal, rotas, modais globais)
â”‚   â”œâ”€â”€ index.css              # Estilos CSS globais
â”‚   â””â”€â”€ main.jsx               # Ponto de entrada da aplicaÃ§Ã£o React (renderiza o App)
â”‚
â”œâ”€â”€ .env                     # Arquivo de configuraÃ§Ã£o de ambiente (NÃƒO versionar dados sensÃ­veis!)
â”œâ”€â”€ .env.example             # Exemplo de como o .env deve ser
â”œâ”€â”€ .gitignore               # Arquivos/pastas ignorados pelo Git
â”œâ”€â”€ eslint.config.js         # ConfiguraÃ§Ã£o do ESLint (qualidade de cÃ³digo)
â”œâ”€â”€ index.html               # Template HTML base da SPA
â”œâ”€â”€ package.json             # DefiniÃ§Ã£o do projeto, dependÃªncias e scripts NPM
â”œâ”€â”€ package-lock.json        # Lockfile das dependÃªncias
â”œâ”€â”€ README.md                # Este arquivo
â””â”€â”€ vite.config.js           # ConfiguraÃ§Ã£o do Vite (build tool)
```

## DescriÃ§Ã£o dos Arquivos e Fluxos Principais

* **`main.jsx`**: Inicializa o React, monta o `` no DOM e configura o `BrowserRouter` do `react-router-dom`.
* **`App.jsx`**: Componente "pai" de toda a aplicaÃ§Ã£o.
    * Renderiza o `
`.
    * Define as rotas usando `` e `` (`/` para `Dashboard`, `/projects/:code` para `ProjectView`).
    * Gerencia o estado da lista completa de projetos (`projects`) buscada da API.
    * Controla a abertura do `NewProjectModal` e do `ProjectDetailModal` quando acionado pela busca por cÃ³digo (modo 'lookup').
    * Ouve eventos globais como `projects:changed` para recarregar a lista de projetos.
* **`services/apiService.js`**: Abstrai todas as interaÃ§Ãµes com a API backend. Exporta funÃ§Ãµes como `fetchProjects`, `createProject`, `updateTaskStatus`, etc., tratando a URL base, headers JSON e erros HTTP.
* **`utils/myProjects.js`**: ContÃ©m a lÃ³gica para ler, adicionar e remover projetos do `localStorage` (chave `projetei.myProjects`). Dispara o evento `projects:changed` apÃ³s modificaÃ§Ãµes para que a UI (ex: `Dashboard`) possa reagir.
* **`utils/devMode.js`**: Gerencia o estado do Modo Desenvolvedor (lendo/escrevendo em `localStorage` na chave `projetei.devMode`) e dispara o evento `devmode:changed`.
* **`pages/Dashboard.jsx`**:
    * Recebe a lista `projects` do `App.jsx`.
    * Usa `myProjects.js` e `devMode.js` para filtrar quais projetos exibir (`Meus Projetos` vs. `Todos`).
    * Filtra localmente por nome quando o `Header` dispara o evento `dashboard:search-name`.
    * Renderiza um grid de `ProjectCard`s.
* **`pages/ProjectView.jsx`**:
    * Usa o `useParams` para pegar o `:projectCode` da URL.
    * Busca os dados completos do projeto (incluindo tarefas) via `fetchProjectByCode`.
    * Organiza as tarefas nas colunas (`KanbanColumn`).
    * Configura o `DndContext` e implementa a lÃ³gica `handleDragEnd` para atualizar o status da tarefa (chamando `updateTaskStatus`), respeitando as regras do checklist.
    * Controla a abertura do `TaskDetailModal` quando um `TaskCard` Ã© clicado.
    * Controla a abertura do `ProjectDetailModal` (modo 'normal') quando o evento `project:open-details` Ã© disparado pelo `Header`.
* **`components/Header.jsx`**:
    * Exibe o tÃ­tulo e botÃµes de navegaÃ§Ã£o (`Voltar`, `Meus Projetos`).
    * Na `Dashboard`, exibe o botÃ£o `+ Novo Projeto` e o formulÃ¡rio de busca.
        * A busca verifica se o termo parece um cÃ³digo; se sim, chama `fetchProjectByCode` e dispara `project:open-modal` (ouvido pelo `App.jsx`) para abrir o `ProjectDetailModal` em modo 'lookup'.
        * Se nÃ£o parece cÃ³digo, dispara `dashboard:search-name` (ouvido pelo `Dashboard.jsx`) para filtro local.
        * Tenta ativar/desativar o Modo Dev com `tryActivateDevMode`.
    * Na `ProjectView`, exibe o cÃ³digo do projeto atual e um botÃ£o para abrir `ProjectDetailModal` (disparando `project:open-details`, ouvido pela `ProjectView.jsx`).
* **`components/TaskDetailModal.jsx`**: Modal rico para exibir e editar uma tarefa.
    * Permite ediÃ§Ã£o in-loco de tÃ­tulo, descriÃ§Ã£o, data e prioridade.
    * Gerencia o CRUD completo de itens do Checklist.
    * Gerencia o CRUD completo de ComentÃ¡rios (lembrando o nome do autor no `localStorage`).
    * Inclui botÃ£o para excluir a tarefa (usando `ConfirmModal`).
* **`components/ProjectDetailModal.jsx`**: Modal para detalhes do projeto. Opera em dois modos:
    * **`normal`**: Aberto de dentro da `ProjectView`. Permite editar nome, descriÃ§Ã£o, data e excluir o projeto (com `ConfirmModal`).
    * **`lookup`**: Aberto pela busca por cÃ³digo no `Header` (via `App.jsx`). NÃ£o permite ediÃ§Ã£o ou exclusÃ£o, mas oferece um botÃ£o para "Adicionar aos Meus Projetos".
* **`components/ConfirmModal.jsx`**: Componente genÃ©rico para exibir uma caixa de diÃ¡logo de confirmaÃ§Ã£o antes de aÃ§Ãµes destrutivas.

## Fluxo de Dados e ComunicaÃ§Ã£o

* **Hierarquia:** `App` -> `Dashboard`/`ProjectView` -> `KanbanColumn`/`ProjectCard` -> `TaskCard`.
* **Props Drilling:** Dados fluem principalmente de cima para baixo via props (ex: `App` passa `projects` para `Dashboard`).
* **Estado Local:** Componentes gerenciam seu prÃ³prio estado quando necessÃ¡rio (ex: `TaskDetailModal` controla qual campo estÃ¡ sendo editado).
* **ElevaÃ§Ã£o de Estado:** A lista principal de projetos (`projects`) Ã© gerenciada no `App.jsx` pois Ã© necessÃ¡ria em mÃºltiplos locais.
* **ComunicaÃ§Ã£o entre Componentes Desacoplados:** Eventos customizados (`window.dispatchEvent` e `window.addEventListener`) sÃ£o usados para comunicaÃ§Ã£o "lateral" ou "de baixo para cima" sem acoplar os componentes diretamente. Exemplos:
    * `myProjects.js` dispara `projects:changed` -> `App.jsx` e `Dashboard.jsx` ouvem para atualizar.
    * `Header.jsx` dispara `dashboard:search-name` -> `Dashboard.jsx` ouve para filtrar.
    * `Header.jsx` dispara `project:open-modal` -> `App.jsx` ouve para abrir o modal de detalhes.
    * `devMode.js` dispara `devmode:changed` -> `Dashboard.jsx` ouve para mudar a visualizaÃ§Ã£o.
* **PersistÃªncia:** `localStorage` Ã© usado para:
    * `projetei.myProjects`: Lista de IDs/cÃ³digos dos projetos favoritos.
    * `projetei.devMode`: Flag (`'1'`) indicando se o Modo Dev estÃ¡ ativo.
    * `commentAuthorName`: Lembrar o Ãºltimo nome usado ao comentar.